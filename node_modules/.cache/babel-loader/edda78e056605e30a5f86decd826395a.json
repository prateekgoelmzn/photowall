{"ast":null,"code":"import { database } from '../database/config';\nexport function startAddingPost(post) {\n  return dispatch => {\n    return database.ref('posts').update({\n      [post.id]: post\n    }).then(() => {\n      dispatch(addPost(post));\n    }).catch(error => {\n      console.log(error);\n    });\n  };\n}\nexport function startLoadingPost() {\n  return dispatch => {\n    return database.ref('posts').once('value').then(snapshot => {\n      let posts = [];\n      snapshot.forEach(childSnapshot => {\n        posts.push(childSnapshot.val());\n      });\n      dispatch(loadPosts(posts));\n    }).catch(error => {\n      console.log(error);\n    });\n  };\n}\nexport function startRemovingPosts(index, id) {\n  return dispatch => {\n    return database.ref(\"posts/\".concat(id)).remove().then(() => {\n      dispatch(removePost(index));\n    }).catch(error => {\n      console.log(error);\n    });\n  };\n}\nexport function startAddingComment(comment, postId) {\n  return dispatch => {\n    return database.ref('comments/' + postId).push(comment).then(() => {\n      dispatch(addComment(comment, postId));\n    }).catch(error => {\n      console.log(error);\n    });\n  };\n}\nexport function startLoadingComments() {\n  return dispatch => {\n    return database.ref('comments').once('value').then(snapshot => {\n      let comments = {};\n      snapshot.forEach(childSnapshot => {\n        comments[childSnapshot.key] = Object.values(childSnapshot.val());\n      });\n      dispatch(loadComments(comments));\n    });\n  };\n}\nexport function loadComments(comments) {\n  return {\n    type: 'LOAD_COMMENTS',\n    comments\n  };\n}\nexport function removePost(index) {\n  return {\n    type: 'REMOVE_POST',\n    index\n  };\n}\nexport function addPost(post) {\n  return {\n    type: 'ADD_POST',\n    post\n  };\n}\nexport function addComment(comment, postId) {\n  return {\n    type: 'ADD_COMMENT',\n    comment,\n    postId\n  };\n}\nexport function loadPosts(posts) {\n  return {\n    type: 'LOAD_POSTS',\n    posts\n  };\n}","map":{"version":3,"sources":["/home/pglinuxlite/Desktop/pgWorkSpace/ReactApp/photowall/src/redux/actions.js"],"names":["database","startAddingPost","post","dispatch","ref","update","id","then","addPost","catch","error","console","log","startLoadingPost","once","snapshot","posts","forEach","childSnapshot","push","val","loadPosts","startRemovingPosts","index","remove","removePost","startAddingComment","comment","postId","addComment","startLoadingComments","comments","key","Object","values","loadComments","type"],"mappings":"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","sourcesContent":["import {database} from '../database/config'\n\nexport function startAddingPost(post){\n     return (dispatch)=>{\n       return database.ref('posts').update({[post.id]:post}).then(()=>{\n         dispatch(addPost(post))\n       }).catch((error)=>{\n         console.log(error)\n       })\n     }\n}\n\nexport function startLoadingPost(){\n  return (dispatch) => {\n    return database.ref('posts').once('value').then((snapshot)=>{\n      let posts = []\n      snapshot.forEach((childSnapshot)=>{\n         posts.push(childSnapshot.val())\n      })\n      dispatch(loadPosts(posts))\n    }).catch((error)=>{\n      console.log(error)\n    })\n\n  }\n}\n\nexport function startRemovingPosts(index,id){\n  return (dispatch)=>{\n    return database.ref(`posts/${id}`).remove().then(()=>{\n      dispatch(removePost(index))\n    }).catch((error)=>{\n      console.log(error)\n    })\n  }\n}\n\nexport function startAddingComment(comment, postId){\n  return (dispatch)=>{\n    return database.ref('comments/'+postId).push(comment).then(()=>{\n        dispatch(addComment(comment,postId))\n    }).catch((error)=>{\n      console.log(error)\n    })\n  }\n}\n                \nexport function startLoadingComments(){\n  return (dispatch)=>{\n    return database.ref('comments').once('value').then((snapshot)=>{\n         let comments = {}\n         snapshot.forEach((childSnapshot)=>{\n             comments[childSnapshot.key] = Object.values(childSnapshot.val())\n         })\n         dispatch(loadComments(comments))\n    })\n  }\n}\n\nexport function loadComments(comments){\n  return {\n      type: 'LOAD_COMMENTS',\n      comments\n  }\n}\n\nexport function removePost(index){\n    return {\n        type: 'REMOVE_POST',\n        index\n    }\n}\n\nexport function addPost(post){\n  return {\n    type: 'ADD_POST',\n    post\n  }\n}\n\nexport function addComment(comment, postId){\n  return {\n      type: 'ADD_COMMENT',\n      comment,\n      postId\n  }\n}\n\nexport function loadPosts(posts){\n    return {\n      type: 'LOAD_POSTS',\n      posts\n    }\n}"]},"metadata":{},"sourceType":"module"}